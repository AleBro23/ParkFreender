<!DOCTYPE html>
<html>

<head>
    <title>Park Freender</title>
    <!--- custom css link-->
    <link rel="stylesheet" type="text/css" href="styles.css">
    <!--- boxicon link -->
    <link rel="stylesheet"
    href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">

    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css"
    rel="stylesheet"/>

    <!--- google font link -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    <link href="https://fonts.googleapis.com/css2?
    family=Open+Sans: wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<script>
  // All'inizio di ogni pagina HTML, controlla se l'utente è loggato
  document.addEventListener("DOMContentLoaded", function() {
      let info = JSON.parse(localStorage.getItem('authInfo'));
      const loginButton = document.querySelector('.loginButton .loginButton-content');
      if (info && info['access_token']) {
          // L'utente è loggato, quindi cambia il pulsante di login in logout
          loginButton.innerHTML = 'Log-out';
          loginButton.parentNode.setAttribute('onclick', 'logout()');
      } else {
          // L'utente non è loggato, quindi mostra il pulsante di login
          loginButton.innerHTML = 'Sign-up with Google';
          loginButton.parentNode.setAttribute('onclick', 'signIn()');
      }
  });

  function logout() {
      let info = JSON.parse(localStorage.getItem('authInfo'));
      fetch("https://oauth2.googleapis.com/revoke?token=" + info['access_token'], {
          method: 'POST',
          headers: {
              'Content-type': 'application/x-www-form-urlencoded'
          }
      }).then(() => {
          localStorage.removeItem('authInfo');
          location.href = "http://localhost:3000/index_ParkFreender.html";
      });
  }
</script>

<body>

    <!---header design-->
    <header>
        <a href="#" class="logo">PARK<span>Freender</span></a>
        
        <ul class="navbar">
            <li><a href="index_ParkFreender.html">Home</a></li>
            <li><a href="parkFree_ParkFreender.html">ParkFree</a></li>
            <li><a href="#">ParkPay</a></li>
            <li><a href="#">Contact us</a></li>
        </ul>

        <div class="h-right">
            <button class="loginButton">
                <span class="loginButton-content">Sign-up with Google</span>
            </button>
            <a href="#"><i class="ri-github-fill"></i></a>
            <a href="#"><i class="ri-youtube-fill"></i></a>
            <a href="#"><i class="ri-instagram-fill"></i></a>
            <a href="#"><i class="ri-tiktok-fill"></i></a>
            <div class="bx bx-menu" id="menu-icon"></div>
        </div>
    </header>


    <section class="about4page">
      <div class="main4page">
          <img class="specificMap" src="Image/map.png">
          <div class="about4page-parkingText4">
              <h1></h1>
              <h5>Free<span> & DiscoOrario</span></h5>
              <p class="excerpt"></p>
              <div class="button-container-action">
                  <!-- pulsanti di azione -->
              </div>
          </div>
      </div>
  </section>

    <!-- FORM DA METTERE NON SO DOVE DL-->
    <div id="formOverlay" class="form-overlay hidden">
      <div class="form-container">
        <div class="review-form-container">
          <form class="review-form">
            <div class="review-form-group">
              <label for="reviewTitle">Review Title</label>
              <input required="" name="reviewTitle" id="reviewTitle" type="text">
            </div>
            <div class="review-form-group">
              <label for="reviewContent">Review Content</label>
              <textarea required="" maxlength="400" cols="50" rows="10" id="reviewContent" name="reviewContent"></textarea>
            </div>
            <div class="rating">
              <input value="5" name="rating" id="star5" type="radio" required>
              <label for="star5"></label>
              <input value="4" name="rating" id="star4" type="radio" required>
              <label for="star4"></label>
              <input value="3" name="rating" id="star3" type="radio" required>
              <label for="star3"></label>
              <input value="2" name="rating" id="star2" type="radio" required>
              <label for="star2"></label>
              <input value="1" name="rating" id="star1" type="radio" required>
              <label for="star1"></label>
            </div>
            <button type="submit" class="review-form-submit-btn">Submit</button>
          </form>
        </div>
      </div>
    </div>
<!-- FINE FORM-->

    <div class="review-text">
        <h2>Reviews:</h2>
    </div> 

    <div class="Reviewscontainer"> 
    <section class="reviewGrid">
    <div class="reviewCard">
        <div class="reviewImage"></div>
        <div class="reviewTextBox">
          <div class="reviewTextContent">
            <p class="reviewTitle">Luca Abete 4.5/5</p>
          </div>
          <p class="reviewDescription">Il Parcheggio San Severino è stato una scoperta fantastica per la mia visita in città. La sua posizione centrale lo rende estremamente comodo per raggiungere le principali attrazioni. Ho apprezzato particolarmente la sicurezza offerta, con telecamere di sorveglianza e personale presente. Il parcheggio era pulito e ben tenuto, mentre il personale era cordiale e disponibile. </p>
        <div>
      </div>
    </div></div>


    <div class="reviewCard">
        <div class="reviewImage"></div>
        <div class="reviewTextBox">
          <div class="reviewTextContent">
            <p class="reviewTitle">Luca Abete 4.5/5</p>
          </div>
          <p class="reviewDescription">Il Parcheggio San Severino è stato una scoperta fantastica per la mia visita in città. La sua posizione centrale lo rende estremamente comodo per raggiungere le principali attrazioni. Ho apprezzato particolarmente la sicurezza offerta, con telecamere di sorveglianza e personale presente. Il parcheggio era pulito e ben tenuto, mentre il personale era cordiale e disponibile. </p>
        <div>
      </div>
    </div></div>


    <div class="reviewCard">
        <div class="reviewImage"></div>
        <div class="reviewTextBox">
          <div class="reviewTextContent">
            <p class="reviewTitle">Luca Abete 4.5/5</p>
          </div>
          <p class="reviewDescription">Il Parcheggio San Severino è stato una scoperta fantastica per la mia visita in città. La sua posizione centrale lo rende estremamente comodo per raggiungere le principali attrazioni. Ho apprezzato particolarmente la sicurezza offerta, con telecamere di sorveglianza e personale presente. Il parcheggio era pulito e ben tenuto, mentre il personale era cordiale e disponibile. </p>
        <div>
      </div>
    </div></div>


    <div class="reviewCard">
        <div class="reviewImage"></div>
        <div class="reviewTextBox">
          <div class="reviewTextContent">
            <p class="reviewTitle">Luca Abete 4.5/5</p>
          </div>
          <p class="reviewDescription">Il Parcheggio San Severino è stato una scoperta fantastica per la mia visita in città. La sua posizione centrale lo rende estremamente comodo per raggiungere le principali attrazioni. Ho apprezzato particolarmente la sicurezza offerta, con telecamere di sorveglianza e personale presente. Il parcheggio era pulito e ben tenuto, mentre il personale era cordiale e disponibile. </p>
        <div>
      </div>
    </div></div>

    </section>
</div>

    

    <!--- custom js file link -->
    <script src="script.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
        $(".actionButton").click(function(){
            $(this).find('svg path').toggleClass("actionClicked");
        });
        });
    </script>

    <script>
      function openForm() {
        document.getElementById('formOverlay').classList.remove('hidden');
      }
    </script>


<script>
  function getParcheggioIdFromURL() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('id');
  }

  document.addEventListener('DOMContentLoaded', async () => {
      const parcheggioId = getParcheggioIdFromURL();
      if (!parcheggioId) {
          console.error('ID parcheggio non trovato nella URL');
          return;
      }

      try {
          const response = await fetch(`/parcheggi/${parcheggioId}`);
          const parcheggio = await response.json();

          if (!parcheggio) {
              console.error('Parcheggio non trovato');
              return;
          }

          // Aggiorna il contenuto della pagina con i dati del parcheggio
          document.querySelector('.about4page-parkingText4 h1').textContent = parcheggio.nome;
          document.querySelector('.excerpt').innerHTML = `
              <strong>Descrizione:</strong> ${parcheggio.descrizione || 'N/A'}<br>
              <strong>Disponibilità:</strong> ${parcheggio.disponibilita}<br>
              <strong>Distanza:</strong> ${parcheggio.distanza} km<br>
              <strong>Valutazione:</strong> ${parcheggio.valutazione}/5
          `;
          // Aggiorna altri elementi della pagina come necessario
      } catch (error) {
          console.error('Errore nel recuperare il parcheggio:', error);
      }
  });
</script>


</body>

</html>
